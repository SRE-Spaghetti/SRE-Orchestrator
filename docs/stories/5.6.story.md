---
Epic: 5
Story: 6
Title: Remove K8s-Agent Service and Dependencies
Status: Done
---

### Story

As a Developer, I want to remove all k8s-agent related code and deployment configurations, so that the codebase only contains the new MCP-based architecture.

### Acceptance Criteria

1. The `services/k8s-agent` directory is deleted
2. The k8s-agent is removed from the root pyproject.toml workspace
3. The `src/app/services/k8s_agent_client.py` file is deleted
4. Helm chart templates for k8s-agent are deleted (deployment, service, rbac)
5. The values.yaml no longer includes k8s-agent configuration
6. Documentation is updated to remove k8s-agent references

### Dev Notes

#### Files to Delete
**K8s-Agent Service:**
- `services/k8s-agent/` (entire directory)
- Remove from root `pyproject.toml` workspace configuration
[Source: `.kiro/specs/orchestrator-refactoring/tasks.md` Task 6.1]

**K8s-Agent Client:**
- `src/app/services/k8s_agent_client.py`
- Any imports of k8s_agent_client in other files
[Source: `.kiro/specs/orchestrator-refactoring/tasks.md` Task 6.2]

**Helm Chart Files:**
- `charts/sre-orchestrator/templates/deployment-k8s-agent.yaml`
- `charts/sre-orchestrator/templates/service-k8s-agent.yaml`
- `charts/sre-orchestrator/templates/rbac-k8s-agent.yaml`
[Source: `.kiro/specs/orchestrator-refactoring/tasks.md` Task 6.3]

#### Configuration Updates
- Remove k8s-agent section from `charts/sre-orchestrator/values.yaml`
- Update any README or documentation that references k8s-agent
[Source: `.kiro/specs/orchestrator-refactoring/design.md` Section 8]

#### Architecture Changes
This removal represents a fundamental architecture change:
- **Before**: Orchestrator → K8s-Agent → Kubernetes API
- **After**: Orchestrator → MCP Server → Kubernetes API

The MCP-based approach is simpler and more extensible.
[Source: `.kiro/specs/orchestrator-refactoring/design.md` Overview]

### Tasks / Subtasks

- [x] **(AC: 1, 2)** **Remove K8s-Agent Service:**
  - Delete `services/k8s-agent/` directory
  - Update root `pyproject.toml` to remove k8s-agent from workspace
  - Verify no broken references remain

- [x] **(AC: 3)** **Remove K8s-Agent Client:**
  - Delete `src/app/services/k8s_agent_client.py`
  - Search for and remove any imports of k8s_agent_client
  - Update any code that referenced the client

- [x] **(AC: 4)** **Remove Helm Chart Templates:**
  - Delete `charts/sre-orchestrator/templates/deployment-k8s-agent.yaml`
  - Delete `charts/sre-orchestrator/templates/service-k8s-agent.yaml`
  - Delete `charts/sre-orchestrator/templates/rbac-k8s-agent.yaml`

- [x] **(AC: 5)** **Update Helm Values:**
  - Remove k8s-agent configuration section from `values.yaml`
  - Remove any k8s-agent related environment variables
  - Clean up any leftover k8s-agent references

- [x] **(AC: 6)** **Update Documentation:**
  - Remove k8s-agent references from README.md
  - Update architecture diagrams
  - Update any setup/deployment guides

- [x] **Verify Clean Removal:**
  - Search codebase for "k8s-agent" or "k8s_agent" references
  - Ensure no broken imports or references
  - Test that application builds successfully

- [x] **Create Git Commit:**
  - Commit message: "refactor: remove k8s-agent service and dependencies"
  - Include all deleted files and updated references

### Change Log

| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-11-14 | 1.0 | Initial draft | Yi (Dev) |

### Dev Agent Record

#### Agent Model Used
_TBD_

#### Debug Log References
_TBD_

#### Completion Notes List
-

#### File List
-

### QA Results

- **Status:** Not yet reviewed
- **Date:**
- **Reviewed by:**
- **Summary:**
- **Issues Found:**
- **Recommendations:**
