---
Epic: 5
Story: 1
Title: Update Dependencies and Add LangChain/LangGraph
Status: Done
---

### Story

As a Developer, I want to update the project dependencies to include LangChain and LangGraph while removing the Gemini SDK, so that I can build the new agentic workflow with modern LLM frameworks.

### Acceptance Criteria

1. langchain, langgraph, and langchain-mcp-adapters are added to pyproject.toml
2. langchain-openai is added for OpenAI-compatible LLM support
3. The google-generativeai dependency is removed from the project
4. poetry.lock is updated with the new dependencies
5. The application can be built successfully with the new dependencies

### Dev Notes

#### Dependencies to Add
- **langchain**: Core LangChain framework for LLM applications
- **langgraph**: State machine framework for agentic workflows
- **langchain-mcp-adapters**: Integration between LangChain and MCP servers
- **langchain-openai**: OpenAI-compatible LLM client
[Source: `.kiro/specs/orchestrator-refactoring/design.md`, `.kiro/specs/orchestrator-refactoring/requirements.md` Requirement 2]

#### Dependencies to Remove
- **google-generativeai**: Native Gemini SDK (being replaced by LangChain)
[Source: `.kiro/specs/orchestrator-refactoring/design.md`, `.kiro/specs/orchestrator-refactoring/requirements.md` Requirement 2.3]

#### Poetry Commands
- Add dependencies: `poetry add langchain langgraph langchain-mcp-adapters langchain-openai`
- Remove dependencies: `poetry remove google-generativeai`
- Update lock file: `poetry lock --no-update`
- Verify installation: `poetry install`

#### Testing
- Verify that the application builds without errors
- Ensure no import errors for new packages
- Check that poetry.lock is consistent

### Tasks / Subtasks

- [x] **(AC: 1, 2)** **Add New Dependencies:**
  - Run `poetry add langchain langgraph langchain-mcp-adapters langchain-openai` in the orchestrator service directory
  - Verify that pyproject.toml includes all new dependencies

- [x] **(AC: 3)** **Remove Old Dependencies:**
  - Run `poetry remove google-generativeai`
  - Verify that pyproject.toml no longer includes google-generativeai

- [x] **(AC: 4)** **Update Lock File:**
  - Run `poetry lock --no-update` to update poetry.lock
  - Verify that poetry.lock is consistent with pyproject.toml

- [x] **(AC: 5)** **Verify Build:**
  - Run `poetry install` to install dependencies
  - Verify no errors during installation
  - Import test: Create a simple script to verify LangChain imports work

- [x] **Create Git Commit:**
  - Commit message: "chore: update dependencies - add LangChain/LangGraph, remove Gemini SDK"
  - Include pyproject.toml and poetry.lock changes

### Change Log

| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-11-14 | 1.0 | Initial draft | Yi (Dev) |

### Dev Agent Record

#### Agent Model Used
_TBD_

#### Debug Log References
_TBD_

#### Completion Notes List
-

#### File List
-

### QA Results

- **Status:** Not yet reviewed
- **Date:**
- **Reviewed by:**
- **Summary:**
- **Issues Found:**
- **Recommendations:**
